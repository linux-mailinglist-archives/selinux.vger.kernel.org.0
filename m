Return-Path: <selinux-owner@vger.kernel.org>
X-Original-To: lists+selinux@lfdr.de
Delivered-To: lists+selinux@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 46540254ACE
	for <lists+selinux@lfdr.de>; Thu, 27 Aug 2020 18:38:29 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726157AbgH0Qi2 (ORCPT <rfc822;lists+selinux@lfdr.de>);
        Thu, 27 Aug 2020 12:38:28 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:50136 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726009AbgH0Qi2 (ORCPT
        <rfc822;selinux@vger.kernel.org>); Thu, 27 Aug 2020 12:38:28 -0400
Received: from mail-ot1-x343.google.com (mail-ot1-x343.google.com [IPv6:2607:f8b0:4864:20::343])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 16562C061264
        for <selinux@vger.kernel.org>; Thu, 27 Aug 2020 09:38:28 -0700 (PDT)
Received: by mail-ot1-x343.google.com with SMTP id n23so4900611otq.11
        for <selinux@vger.kernel.org>; Thu, 27 Aug 2020 09:38:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=j9NeRqs4WzkLipbnoue7esEkknzxurM8cKe93ztI5Og=;
        b=U3799NmWgKNNL2z8yFouGX8GWjrDujZhX4OtfIxGyPLoGtYJ285ov8jygNIj9JoYV6
         9568zoDRoWR1+rd/YUznQPH6k20HaS4natd+0OkpvdGXkShK9yC+ZWnC1ctHWsMoRJ6/
         dVqUO3ji9GPsBZDYpX75r2ve34RO2mCyMpw8CMEufx65Kr7mEm0QPPIpNtA+a+CJ2uEX
         o1ovaHA9u5T2BZDTFAc3taTv1SnoqaU2QQDTwYD5+ihga2tuEfej2y4EBTmRQ72QOjQn
         yp7klFT7kXOH1fszJ3IO6dhfGLR8GzTqdWfJ16mi7szXpOJW3VaGukxwqB3fQ8j+ShSI
         U33Q==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=j9NeRqs4WzkLipbnoue7esEkknzxurM8cKe93ztI5Og=;
        b=BnVFs+AXAKLOGINwv4m24tSgv1UPYLvKOAOh97gHOnyfVtehgeLV03JE0QSLe7NQYP
         K2rHdEBN7R5tcCtYTWAfg9TPYTWg/xkMaFWF1clKeYZUgK02BLqAv4l/7XSHvhLq9Tbz
         v6YCVB0vs/Sgf65anEfW7+MF5qau9ttuyVT/+jPz8LI/kicWGy9RZTcC50fQAbfW6LHP
         HSwCMZHjfJiOk6Dy8/AFw1ydqw2MnpojSwDBxaMwnwJI5tomKOndDkUv/GRmJU+opg2/
         +35etNkQ3Q91QybiRK96IDTalFoSSwX8wNqKx/bLDnrpPJ4eCBFSxUz02+ILs1xsnqbU
         QJKw==
X-Gm-Message-State: AOAM533OQCi19ZaxzJg4RLwK2tnyPGCS7ESyNQv1SOwZ9mF+iG/hjm8W
        GbGUSvrHu+BpQjXWjw5bUzvQaDMoFGEUcl6oaLk7Q8ioNik=
X-Google-Smtp-Source: ABdhPJwWTHEyFXrAnlyOBQPzIO1pUPyJQZz7Up9YeEAO/57dBGAEq1KK83Rz6+KgaGigYrnT6CunAKA9B8cnIExVmak=
X-Received: by 2002:a05:6830:1258:: with SMTP id s24mr5300983otp.162.1598546307453;
 Thu, 27 Aug 2020 09:38:27 -0700 (PDT)
MIME-Version: 1.0
References: <20200827125839.79006-1-chpebeni@linux.microsoft.com>
In-Reply-To: <20200827125839.79006-1-chpebeni@linux.microsoft.com>
From:   Stephen Smalley <stephen.smalley.work@gmail.com>
Date:   Thu, 27 Aug 2020 12:37:17 -0400
Message-ID: <CAEjxPJ4O+uN4+ezYZhv5gHYs1RDMuG2oYvP+7OC-FH4Gh8oaNQ@mail.gmail.com>
Subject: Re: [PATCH 1/1] libselinux: Add new log callback levels for enforcing
 and policy load notices.
To:     Chris PeBenito <chpebeni@linux.microsoft.com>
Cc:     SElinux list <selinux@vger.kernel.org>
Content-Type: text/plain; charset="UTF-8"
Sender: selinux-owner@vger.kernel.org
Precedence: bulk
List-ID: <selinux.vger.kernel.org>
X-Mailing-List: selinux@vger.kernel.org

On Thu, Aug 27, 2020 at 8:59 AM Chris PeBenito
<chpebeni@linux.microsoft.com> wrote:
>
> This will enable userspace object managers to send proper audits for policy
> loads and setenforce messages generated by the userspace AVC code.
>
> Signed-off-by: Chris PeBenito <chpebeni@linux.microsoft.com>

Acked-by: Stephen Smalley <stephen.smalley.work@gmail.com>

> ---
> diff --git a/libselinux/include/selinux/selinux.h b/libselinux/include/selinux/selinux.h
> index c22834e5..ae98a92e 100644
> --- a/libselinux/include/selinux/selinux.h
> +++ b/libselinux/include/selinux/selinux.h
> @@ -182,6 +182,8 @@ extern void selinux_set_callback(int type, union selinux_callback cb);
>  #define SELINUX_WARNING                1
>  #define SELINUX_INFO           2
>  #define SELINUX_AVC            3
> +#define SELINUX_POLICYLOAD     4
> +#define SELINUX_SETENFORCE     5
>  #define SELINUX_TRANS_DIR      "/var/run/setrans"

Not changed by your patch but that SELINUX_TRANS_DIR definition is
very odd, certainly shouldn't be next to these other definitions.
Will have to look into what uses that outside of libselinux.  At some
point we should likely also fix up the indentation/alignment of the
values above but that can be separate.
